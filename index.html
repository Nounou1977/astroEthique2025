<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>5 Faits √âtonnants sur les Trous Noirs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Botpress Webchat -->
  <script src="https://cdn.botpress.cloud/webchat/v3.3/inject.js"></script>
  <style>
    body{font-family:Arial, sans-serif;margin:1rem;background:#f9f9f9;line-height:1.6;padding-bottom:100px}
    h1{color:#2e8b57;font-size:1.5rem}
    section{margin-bottom:2rem}
    .quiz{border:1px solid #ccc;padding:1rem;background:#fff;border-radius:8px}
    .btn{background:#2e8b57;color:#fff;padding:1rem;border:none;display:block;margin-top:1rem;cursor:pointer;border-radius:4px;font-size:1rem;width:100%;touch-action:manipulation}
    .btn:hover{background:#246d43}
    .btn:active{transform:scale(0.98)}
    /* Lignes cliquables - AM√âLIOR√â POUR MOBILE */
    .quiz ul{list-style:none;padding:0;margin:1rem 0}
    .quiz li{
      cursor:pointer;
      padding:1rem;
      border-radius:8px;
      margin:.5rem 0;
      border:2px solid #ddd;
      background:#fff;
      transition:all 0.2s ease;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      touch-action:manipulation;
      min-height:50px;
      display:flex;
      align-items:center;
    }
    .quiz li:hover{background:#f0f0f0}
    .quiz li:active{transform:scale(0.98)}
    .quiz li.selected{background:#d4f1d4;border-color:#2e8b57;font-weight:bold}
    /* Chat widget */
    #webchat{position:fixed;bottom:20px;right:20px;width:min(380px, calc(100vw - 40px));height:min(500px, calc(100vh - 100px));z-index:1000;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.25);}
    #webchat .bpFab{display:none;}
    
    /* Responsive */
    @media (max-width: 600px) {
      body{margin:0.5rem}
      h1{font-size:1.3rem}
      .quiz{padding:0.8rem}
      .quiz li{padding:0.8rem;font-size:0.95rem}
      #webchat{width:calc(100vw - 20px);height:calc(100vh - 80px);bottom:10px;right:10px}
    }
  </style>
</head>
<body>
  <h1>5 Faits √âtonnants sur les Trous Noirs</h1>
  <section>
    <p>Les trous noirs ne sont pas des aspirateurs cosmiques mais des objets avec une gravit√© extr√™me. Le th√©or√®me de Hawking (1974) prouve que leur surface ne peut jamais diminuer.</p>
    <p><strong>Source officielle :</strong> <a href="https://fr.wikipedia.org/wiki/Trou_noir" target="_blank" rel="noopener noreferrer">Wikip√©dia ‚Äì Trou noir</a></p>
  </section>
  <section class="quiz">
    <h3>Quiz de compr√©hension</h3>
    <p><strong>Question :</strong> Quelle est la caract√©ristique principale du rayonnement de Hawking ?</p>
    <ul id="quiz-options">
      <li data-index="0">Il est thermique et al√©atoire</li>
      <li data-index="1">Il transporte toute l'information</li>
      <li data-index="2">Il est plus rapide que la lumi√®re</li>
      <li data-index="3">Il ne contient aucune √©nergie</li>
    </ul>
    <button class="btn">Valider</button>
  </section>
  <!-- AstroBot -->
  <div id="webchat"></div>
  <script>
    /* ----------  QUIZ  ---------- */
    const btn   = document.querySelector('.btn');
    const items = document.querySelectorAll('#quiz-options li');
    const BONNE_INDEX = 0;
    
    let selectedIndex = null;

    items.forEach((li) => {
      // Utiliser touchstart ET click pour mobile et desktop
      const handleSelect = (e) => {
        e.preventDefault(); // Emp√™che le double-clic sur mobile
        
        // Retirer la classe selected de tous les items
        items.forEach(i => i.classList.remove('selected'));
        
        // Ajouter la classe selected √† l'item cliqu√©
        li.classList.add('selected');
        
        // Stocker l'index s√©lectionn√©
        selectedIndex = parseInt(li.getAttribute('data-index'));
        
        console.log('Index s√©lectionn√©:', selectedIndex);
      };
      
      // √âcouter les deux √©v√©nements
      li.addEventListener('touchstart', handleSelect, {passive: false});
      li.addEventListener('click', handleSelect);
    });

    btn.addEventListener('click', (e) => {
      e.preventDefault();
      
      if (selectedIndex === null) {
        alert('‚ùå Choisis une r√©ponse avant de valider.');
        return;
      }
      
      if (selectedIndex === BONNE_INDEX) {
        alert('‚úÖ Bonne r√©ponse !');
      } else {
        alert('‚ùå Mauvaise r√©ponse.');
      }
    });

    /* ----------  AstroBot  ---------- */
    window.addEventListener('DOMContentLoaded', () => {
      window.botpress.init({
        "botId": "fb41640b-a827-4e39-8690-4a617035f277",
        "configuration": {
          "version": "v2",
          "website": {},
          "email": {},
          "phone": {},
          "termsOfService": {},
          "privacyPolicy": {},
          "color": "#3276EA",
          "variant": "solid",
          "headerVariant": "glass",
          "themeMode": "light",
          "fontFamily": "inter",
          "radius": 4,
          "feedbackEnabled": false,
          "footer": "[‚ö° by Botpress](https://botpress.com/?from=webchat)",
          "soundEnabled": false,
          "proactiveMessageEnabled": false,
          "proactiveBubbleMessage": "Hi! üëã Need help?",
          "proactiveBubbleTriggerType": "afterDelay",
          "proactiveBubbleDelayTime": 10
        },
        "clientId": "380ce8c4-cd1a-4a72-bb32-7df924758c0d",
        "selector": "#webchat"
      });
      window.botpress.on("webchat:ready", () => window.botpress.open());
    });
  </script>
</body>
</html>
